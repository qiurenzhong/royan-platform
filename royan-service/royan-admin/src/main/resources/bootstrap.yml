server:
  port: 21406 #端口号

spring:
  application:
    name: royan-admin
  profiles:
    active: dev
  cloud:
    nacos:
      discovery: #注册中心
        server-addr: nacos.royan.com:8848
      config: #配置中心
        server-addr: ${spring.cloud.nacos.discovery.server-addr}
        file-extension: yml
    sentinel: #sentine配置
      enabled: true
      eager: true
      transport:
        dashboard: localhost:18080

  autoconfigure:
    #自动化配置 例外处理
    exclude: com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceAutoConfigure
  #要使用的连接池实现的完全限定名称。默认情况下，它是从类路径自动检测的
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    dynamic:
      primary: master
      strict: false
      datasource:
        master:
          url: jdbc:mysql://mysql.royan.com:3306/royan_admin?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&useSSL=false&zeroDateTimeBehavior=convertToNull&rewriteBatchedStatements=true
          driver-class-name: com.mysql.cj.jdbc.Driver
          username: root
          password: root@123456
        slave:
          url: jdbc:mysql://mysql.royan.com:3306/royan_admin?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&useSSL=false&zeroDateTimeBehavior=convertToNull&rewriteBatchedStatements=true
          driver-class-name: com.mysql.cj.jdbc.Driver
          username: root
          password: root@123456
      druid:
        initial-size: 5
        min-idle: 1
        max-active: 30
        max-wait: 60000
        time-between-eviction-runs-millis: 60000
        min-evictable-idle-time-millis: 300000
        validation-query: SELECT 'X'
        test-on-borrow: false
        test-on-return: false
        test-while-idle: true
        pool-prepared-statements: true
        max-pool-prepared-statement-per-connection-size: 20
        filters: stat,wall,slf4j,config
        use-global-data-source-stat: true
        stat:
          log-slow-sql: true
          merge-sql: true
          slow-sql-millis: 10000

  #redis配置
  redis:
    # 地址
    host: 192.168.0.128
    # 端口
    port: 6379
    # 密码
    password: 123456
    # 数据库编号
    database: 10
    # 超时时间，单位毫秒
    timeout: 3000
    # 配置lettuce
    lettuce:
      pool:
        # 连接池中的最小空闲连接
        min-idle: 1
        # 连接池中的最大空闲连接
        max-idle: 6
        # 连接池最大连接数（使用负值表示没有限制,不要配置过大，否则可能会影响redis的性能）
        max-active: 10
        # 连接池最大阻塞等待时间（使用负值表示没有限制）；单位毫秒
        max-wait: 1000
      #关闭超时时间；单位毫秒
      shutdown-timeout: 500


  #es配置
  elasticsearch:
    bboss:
      elasticUser: elastic
      elasticPassword: 123456
      elasticsearch:
        rest:
          hostNames: 192.168.0.128:9200

mybatis-plus: #mybatis-plus配置
  configuration:
    default-fetch-size: 100
    default-statement-timeout: 30
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl #开启sql日志
  mapper-locations: classpath*:com/royan/admin/provider/mapper/*.xml
  type-aliases-package: com.royan.admin.provider.model

easy-es:
  enable: true #默认为true,若为false则认为不启用本框架
  address: 192.168.0.128:9200 # es的连接地址,必须含端口 若为集群,则可以用逗号隔开 例如:127.0.0.1:9200,127.0.0.2:9200
  username: elastic #若无 则可省略此行配置
  password: 123456 #若无 则可省略此行配置


management:
  endpoints:
    web:
      exposure:
        include: "*"

feign:
  okhttp:
    enabled: true
  sentinel: #开启feign支持
    enabled: true


#日志配置
logging:
  level:
    ROOT: warn
    org.springframework: info
    org.springframework.web.servlet.view: info
    org.springframework.web.servlet.mvc: info
    io.undertow.request: info
    org.frameworkset.elasticsearch: info
    com.royan: debug
  file:
    path: /app/logs/${spring.application.name}


#knife4j配置
royan:
  knife4j:
    enabled: true
    title: "系统管理"
    description: "后台统一管理接口"
    base-package: com.royan.admin.provider.controller
    password-token-url: http://localhost:21402/oauth2/authorize